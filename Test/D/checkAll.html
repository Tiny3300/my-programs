<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>全选2</title>

</head>
<body>
<table id="carTable">
    <thead>
    <tr>
        <td><input type="checkbox" class="check-all check"/></td>
        <td>全选</td>
    </tr>
    </thead>

    <tbody>
    <tr>
        <td><input type="checkbox" class="check-one check"/></td>
        <td>冰箱</td>
    </tr>
    <tr>
        <td><input type="checkbox" class="check-one check"/></td>
        <td>电视</td>
    </tr>
    <tr>
        <td><input type="checkbox" class="check-one check"/></td>
        <td>空调</td>
    </tr>

    </tbody>
</table>


<script>
    window.onload = function () {
        //对低版本的IE处理兼容性问题
        if (!document.getElementsByClassName) {
            document.getElementsByClassName = function (cls) {
                var ret = [];
                var els = document.getElementsByTagName('*');//拿到所有标签
                for (var i = 0, len = els.length; i < len; i++) {
                    if (els[i].className === cls
                            || els[i].className.indexOf(cls + ' ')
                            || els[i].className.indexOf(' ' + cls + ' ')
                            || els[i].className.indexOf(' ' + cls) >= 0) {
                        ret.push(els[i]);
                    }
                }
                return ret;
            }
        }

        var checkInputs = document.getElementsByClassName('check');//所有的复选框
        var checkAllInputs = document.getElementsByClassName('check-all');//全选框


        for (var i = 0, len = checkInputs.length; i < len; i++) {
            checkInputs[i].onclick = function () {
                if (this.className === 'check-all check') {
                    for (var j = 0; j < checkInputs.length; j++) {
                        checkInputs[j].checked = this.checked;
                    }
                }
                //子选框去掉一个，全选框应该为false
                if (this.checked == false) {
                    for (var k = 0; k < checkAllInputs.length; k++) {
                        checkAllInputs[k].checked = false;
                    }
                }

                //子选框全部选上的时候，全选框应该为true

                var ch = 0;

                for (var x = 1; x < checkInputs.length; x++) {

                    if (checkInputs[x].checked == true) {

                        ch++;

                    }

                }

                if (ch == (checkInputs.length - checkAllInputs.length)) {

                    for (var z = 0; z < checkAllInputs.length; z++) {

                        checkAllInputs[z].checked = true;

                    }

                }


            }
        }


    }


</script>
</body>

</html>