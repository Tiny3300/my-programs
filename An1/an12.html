<!DOCTYPE html>
<html ng-app="myApp" ng-controller="myCtrl">
<head lang="en">
    <meta charset="UTF-8">
    <script src="js/angular.min.js" type="text/javascript"></script>
    <title></title>
    <style>
        ul {
            list-style-type: none;
        }
    </style>

</head>
<body>
<ul>
    <li ng-repeat="userTitle in UserTitleList">
        <label>{{userTitle.UserName}}</label><br/>
        <h4>{{userTitle.Title}}</h4>
        <span>{{userTitle.LikeAmount}}</span>&nbsp;&nbsp;
        <like content="userTitle"></like>
        <br/>
        <label>{{userTitle.Time}}</label>

        <ul><li ng-repeat="likeList in userTitle.LikeList">
            <span>{{likeList.Text}}</span>

        </li></ul>

        <p>&nbsp;</p>
        <hr/>
        <p>&nbsp;</p>



    </li>


</ul>

</body>

<script type="text/javascript">
    var app = angular.module("myApp", []);
    app.controller("myCtrl", function ($scope) {
        $scope.UserTitleList = [
            {UserName: "Tom", Title: "今天天气不错！", Time: "2017-03-07", LikeAmount: 0,LikeList:[]},
            {UserName: "Tom", Title: "今天要去打篮球！", Time: "2017-03-06", LikeAmount: 0,LikeList:[]},
            {UserName: "Tom", Title: "今天路上碰到一只小鹿！", Time: "2017-03-05", LikeAmount: 0,LikeList:[]},
            {UserName: "Tom", Title: "我决定走路去上班！", Time: "2017-03-04", LikeAmount: 0,LikeList:[]},
            {UserName: "Tom", Title: "今晚回家早点睡。", Time: "2017-03-03", LikeAmount: 0,LikeList:[]}

        ];
    });
    app.directive("like", function () {
        var direction = {};
        direction.restrict = 'AE';
        direction.template = "<button ng-click='Like()'>赞</button>";


        direction.scope = {
            content: "="

        };

        direction.link = function ($scope, element) {
            $scope.Like = function () {
               // $scope.content.LikeAmount = $scope.content.LikeAmount + 1;
                $scope.content.LikeList.push({Text:"Jerry点了赞"});
            };
            //console.log($scope.content.LikeAmount);


        };
        return direction;
    });


</script>
</html>